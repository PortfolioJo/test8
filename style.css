// ===========================================
// التطبيق الرئيسي - ترجمة كاملة للعربية والإنجليزية
// ===========================================

document.addEventListener('DOMContentLoaded', function() {
    // تهيئة جميع المكونات
    initNavigation();
    initThemeSwitcher();
    initLanguageSwitcher();
    initCurrentYear();
    initScrollAnimations();
    initProjectFilter();
    initProjectModal();
    initContactForm();
    initScrollProgress();
    initSmoothScrolling();
    initPageAnimations();
    initFloatingParticles();
    
    // تعيين اللغة الافتراضية إلى العربية
    setTimeout(() => {
        const currentLang = document.documentElement.getAttribute('lang') || 'ar';
        if (currentLang === 'ar') {
            setLanguage('ar');
            updateLangText('ar');
        }
    }, 100);
});

// ===========================================
// الترجمات الكاملة للعربية والإنجليزية
// ===========================================

const translations = {
    en: {
        // الموقع
        'site.title': 'Aseel | Creative Digital Designer',
        
        // شريط التنقل
        'nav.logo': 'Aseel',
        'nav.designer': 'Digital Designer',
        'nav.home': 'Home',
        'nav.about': 'About',
        'nav.work': 'Work',
        'nav.process': 'Process',
        'nav.contact': 'Contact',
        'lang.ar': 'AR',
        'lang.en': 'EN',
        
        // قسم البطل
        'hero.badge': 'Digital Art',
        'hero.greeting': "Hi, I'm",
        'hero.name': 'Aseel',
        'hero.title': 'Creative Digital Designer',
        'hero.description': 'I design clean visuals & fast experiences for Gen Z brands',
        'hero.viewWork': 'View Work',
        'hero.contact': 'Contact Me',
        'hero.downloadCV': 'Download CV',
        'hero.explore': 'Explore',
        
        // الإحصائيات
        'stats.experience': 'Years Experience',
        'stats.projects': 'Projects Done',
        'stats.fast': 'Fast',
        'stats.design': 'Web & Mobile Design',
        'stats.location': 'Amman',
        'stats.based': 'Based in Jordan',
        
        // قسم عنّي
        'about.title': 'About Me',
        'about.subtitle': 'Where creativity meets purpose',
        'about.badge': 'Visual Artist',
        'about.quote': '"I design clean and fast digital identities that fit stores and startups. My goal is to simplify design and provide a smart experience connected to Gen Z."',
        'about.philosophy': 'Design Philosophy',
        'about.philosophyText': 'I believe in creating designs that not only look beautiful but also solve problems and tell compelling stories. Every element in my work carries meaning and purpose.',
        'about.experience': 'Experience',
        'about.experienceText': 'With over 5 years of digital design experience, I have developed a unique approach that combines artistic intuition with professional methodology.',
        'about.tools': 'Main Tools',
        
        // قسم الأعمال
        'work.title': 'My Featured Work',
        'work.subtitle': 'Selected projects showcasing design excellence',
        'work.filters.all': 'All',
        'work.filters.branding': 'Branding',
        'work.filters.web': 'Web Design',
        'work.filters.art': 'Digital Art',
        'work.view': 'View Project',
        'work.project1.category': 'Brand Identity',
        'work.project1.title': 'Luxury Fashion Brand',
        'work.project1.description': 'Complete visual identity for a high-end fashion brand blending heritage with modernity',
        'work.project2.category': 'Web Design',
        'work.project2.title': 'Interactive Art Platform',
        'work.project2.description': 'Modern user interface for an art platform with seamless browsing experience',
        'work.project3.category': 'Digital Art',
        'work.project3.title': 'Abstract Art Series',
        'work.project3.description': 'Collection of digital artworks inspired by contemporary Arabic culture',
        'work.result1': '40% Brand Awareness Increase',
        'work.result2': 'Better Customer Experience',
        'work.result3': 'Enhanced Visual Identity',
        'work.result4': '60% Browsing Time Increase',
        'work.result5': 'Improved Conversion Rates',
        'work.result6': 'Enhanced User Experience',
        'work.result7': 'Successful Art Exhibition',
        'work.result8': 'All Artworks Sold',
        'work.result9': 'Wide Media Coverage',
        
        // قسم طريقة العمل
        'process.title': 'How I Work',
        'process.subtitle': 'Simple process, amazing results',
        'process.step1.title': 'Discovery',
        'process.step1.description': 'Understanding your brand and goals',
        'process.step2.title': 'Moodboard',
        'process.step2.description': 'Creating visual direction & style guide',
        'process.step3.title': 'Design',
        'process.step3.description': 'Crafting beautiful, functional designs',
        'process.step4.title': 'Deliver',
        'process.step4.description': 'Final files + support & updates',
        
        // قسم الخدمات
        'services.title': 'My Services',
        'services.subtitle': 'Comprehensive design solutions for your needs',
        'services.service1.title': 'Brand Identity',
        'services.service1.description': 'Complete visual identity systems that express brand values',
        'services.service2.title': 'Web & App Design',
        'services.service2.description': 'Modern user interfaces for exceptional experiences',
        'services.service3.title': 'Digital Art',
        'services.service3.description': 'Creating unique digital artworks for social media',
        'services.popular': 'Most Popular',
        'services.startingFrom': 'Starting from',
        
        // قسم آراء العملاء
        'testimonials.title': 'Client Testimonials',
        'testimonials.subtitle': 'What clients say about working with me',
        'testimonials.testimonial1': '"Aseel completely transformed our brand! The designs are not only beautiful but also increased our conversions by 40%. Working with her was smooth and professional."',
        'testimonials.testimonial2': '"The social media packages she created went viral! Perfect blend of Gen Z aesthetics and brand identity. Highly recommend for any modern brand."',
        'testimonials.position1': 'CEO, StartupX',
        'testimonials.position2': 'Marketing Director',
        
        // قسم الدعوة للعمل
        'cta.title': 'Ready to Build Something Cool?',
        'cta.subtitle': "Let's create something amazing together",
        'cta.button': "Let's Work Together",
        
        // قسم الاتصال
        'contact.title': "Let's Create Together",
        'contact.subtitle': "Let's discuss your idea and turn it into reality",
        'contact.email': 'Email',
        'contact.phone': 'Phone',
        'contact.location': 'Location',
        'contact.remote': 'Available for remote work worldwide',
        'contact.form.name': 'Full Name',
        'contact.form.email': 'Email Address',
        'contact.form.select': 'Select Service',
        'contact.form.branding': 'Brand Identity',
        'contact.form.web': 'Web & App Design',
        'contact.form.art': 'Digital Art',
        'contact.form.other': 'Other Service',
        'contact.form.message': 'Project Details',
        'contact.form.submit': 'Send Message',
        
        // الفوتر
        'footer.logo': 'Aseel',
        'footer.tagline': 'Creative Digital Designer',
        'footer.home': 'Home',
        'footer.about': 'About',
        'footer.work': 'Work',
        'footer.process': 'Process',
        'footer.contact': 'Contact',
        'footer.name': 'Aseel',
        'footer.rights': 'All rights reserved',
        
        // نافذة المشروع
        'modal.about': 'About Project',
        'modal.technologies': 'Technologies Used',
        'modal.results': 'Results',
        'modal.start': 'Start Similar Project'
    },
    ar: {
        // الموقع
        'site.title': 'أسيل | مصممة رقمية إبداعية',
        
        // شريط التنقل
        'nav.logo': 'أسيل',
        'nav.designer': 'مصممة رقمية',
        'nav.home': 'الرئيسية',
        'nav.about': 'عنّي',
        'nav.work': 'أعمالي',
        'nav.process': 'طريقة العمل',
        'nav.contact': 'اتصل بي',
        'lang.ar': 'عربي',
        'lang.en': 'EN',
        
        // قسم البطل
        'hero.badge': 'فن رقمي',
        'hero.greeting': 'مرحباً، أنا',
        'hero.name': 'أسيل',
        'hero.title': 'مصممة رقمية إبداعية',
        'hero.description': 'أصمم هويات بصرية نظيفة وسريعة تناسب علامات جيل Z',
        'hero.viewWork': 'عرض الأعمال',
        'hero.contact': 'تواصل معي',
        'hero.downloadCV': 'تحميل السيرة الذاتية',
        'hero.explore': 'استكشف',
        
        // الإحصائيات
        'stats.experience': 'سنوات خبرة',
        'stats.projects': 'مشروع منجز',
        'stats.fast': 'سريع',
        'stats.design': 'تصميم ويب وجوال',
        'stats.location': 'عمان',
        'stats.based': 'مقيمة في الأردن',
        
        // قسم عنّي
        'about.title': 'عنّي',
        'about.subtitle': 'حيث يلتقي الإبداع بالغرض',
        'about.badge': 'فنانة بصرية',
        'about.quote': '"أصمم هويات رقمية نظيفة وسريعة تتناسب مع المتاجر والشركات الناشئة. هدفي تبسيط التصميم وتقديم تجربة ذكية مرتبطة بجيل Z."',
        'about.philosophy': 'فلسفة التصميم',
        'about.philosophyText': 'أؤمن بإنشاء تصاميم لا تبدو جميلة فقط بل تحل المشكلات وتروي قصصاً مؤثرة. كل عنصر في عملي يحمل معنى وغرضاً.',
        'about.experience': 'الخبرة',
        'about.experienceText': 'مع خبرة تزيد عن 5 سنوات في التصميم الرقمي، طورت أسلوباً فريداً يجمع بين الحدس الفني والمنهجية الاحترافية.',
        'about.tools': 'الأدوات الرئيسية',
        
        // قسم الأعمال
        'work.title': 'أعمالي المميزة',
        'work.subtitle': 'مشاريع مختارة تعرض التميز في التصميم',
        'work.filters.all': 'الكل',
        'work.filters.branding': 'هوية بصرية',
        'work.filters.web': 'تصميم ويب',
        'work.filters.art': 'فن رقمي',
        'work.view': 'عرض المشروع',
        'work.project1.category': 'هوية بصرية',
        'work.project1.title': 'علامة أزياء فاخرة',
        'work.project1.description': 'هوية بصرية كاملة لعلامة أزياء فاخرة تجمع بين التراث والحداثة',
        'work.project2.category': 'تصميم ويب',
        'work.project2.title': 'منصة فنية تفاعلية',
        'work.project2.description': 'واجهة مستخدم حديثة لمنصة فنية مع تجربة تصفح سلسة',
        'work.project3.category': 'فن رقمي',
        'work.project3.title': 'سلسلة فن تجريدي',
        'work.project3.description': 'مجموعة من الأعمال الفنية الرقمية المستوحاة من الثقافة العربية المعاصرة',
        'work.result1': 'زيادة الوعي بالعلامة 40%',
        'work.result2': 'تحسين تجربة العملاء',
        'work.result3': 'تعزيز الهوية البصرية',
        'work.result4': 'زيادة وقت التصفح 60%',
        'work.result5': 'تحسين معدلات التحويل',
        'work.result6': 'تعزيز تجربة المستخدم',
        'work.result7': 'معرض فني ناجح',
        'work.result8': 'بيع جميع الأعمال',
        'work.result9': 'تغطية إعلامية واسعة',
        
        // قسم طريقة العمل
        'process.title': 'كيف أشتغل',
        'process.subtitle': 'عملية بسيطة، نتائج مذهلة',
        'process.step1.title': 'اكتشاف',
        'process.step1.description': 'فهم علامتك التجارية وأهدافك',
        'process.step2.title': 'لوحة الإلهام',
        'process.step2.description': 'إنشاء اتجاه بصري ودليل نمط',
        'process.step3.title': 'تصميم',
        'process.step3.description': 'صنع تصاميم جميلة وعملية',
        'process.step4.title': 'تسليم',
        'process.step4.description': 'الملفات النهائية + الدعم والتحديثات',
        
        // قسم الخدمات
        'services.title': 'خدماتي',
        'services.subtitle': 'حلول تصميمية شاملة تناسب احتياجاتك',
        'services.service1.title': 'الهوية البصرية',
        'services.service1.description': 'أنظمة هوية بصرية كاملة تعبر عن قيم العلامة التجارية',
        'services.service2.title': 'تصميم الويب والتطبيقات',
        'services.service2.description': 'واجهات مستخدم حديثة لتجارب استثنائية',
        'services.service3.title': 'الفن الرقمي',
        'services.service3.description': 'إنشاء أعمال فنية رقمية فريدة لوسائل التواصل',
        'services.popular': 'الأكثر طلباً',
        'services.startingFrom': 'تبدأ من',
        
        // قسم آراء العملاء
        'testimonials.title': 'آراء العملاء',
        'testimonials.subtitle': 'ماذا يقول العملاء عن العمل معي',
        'testimonials.testimonial1': '"أسيل حولت علامتنا التجارية بالكامل! التصاميم ليست جميلة فقط بل زادت من تحويلاتنا بنسبة 40%. العمل معها كان سلساً ومحترفاً."',
        'testimonials.testimonial2': '"حزم وسائل التواصل الاجتماعي التي أنشأتها أصبحت viral! مزيج مثالي من جماليات Gen Z وهوية العلامة التجارية. أوصي بها بشدة لأي علامة حديثة."',
        'testimonials.position1': 'مديرة تنفيذية، StartupX',
        'testimonials.position2': 'مدير تسويق',
        
        // قسم الدعوة للعمل
        'cta.title': 'جاهز لبناء شيء رائع؟',
        'cta.subtitle': 'لنخلق شيئاً مذهلاً معاً',
        'cta.button': 'لنعمل معاً',
        
        // قسم الاتصال
        'contact.title': 'لنبدع معاً',
        'contact.subtitle': 'لنتناقش حول فكرتك ونحولها إلى واقع',
        'contact.email': 'البريد الإلكتروني',
        'contact.phone': 'الهاتف',
        'contact.location': 'الموقع',
        'contact.remote': 'متاح للعمل عن بُعد عالمياً',
        'contact.form.name': 'الاسم الكامل',
        'contact.form.email': 'البريد الإلكتروني',
        'contact.form.select': 'اختر الخدمة',
        'contact.form.branding': 'الهوية البصرية',
        'contact.form.web': 'تصميم الويب والتطبيقات',
        'contact.form.art': 'الفن الرقمي',
        'contact.form.other': 'خدمة أخرى',
        'contact.form.message': 'تفاصيل المشروع',
        'contact.form.submit': 'إرسال الرسالة',
        
        // الفوتر
        'footer.logo': 'أسيل',
        'footer.tagline': 'مصممة رقمية إبداعية',
        'footer.home': 'الرئيسية',
        'footer.about': 'عنّي',
        'footer.work': 'أعمالي',
        'footer.process': 'طريقة العمل',
        'footer.contact': 'اتصل بي',
        'footer.name': 'أسيل',
        'footer.rights': 'جميع الحقوق محفوظة',
        
        // نافذة المشروع
        'modal.about': 'عن المشروع',
        'modal.technologies': 'التقنيات المستخدمة',
        'modal.results': 'النتائج',
        'modal.start': 'ابدأ مشروعاً مماثلاً'
    }
};

// ===========================================
// شريط التنقل
// ===========================================

function initNavigation() {
    const nav = document.getElementById('nav');
    const navMenu = document.getElementById('navMenu');
    const navToggle = document.getElementById('navToggle');
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section[id]');

    // تبديل قائمة الجوال
    navToggle.addEventListener('click', function() {
        this.classList.toggle('active');
        navMenu.classList.toggle('active');
        document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
        
        // تحويل الهامبرغر إلى X
        const spans = this.querySelectorAll('span');
        if (this.classList.contains('active')) {
            spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
            spans[1].style.opacity = '0';
            spans[2].style.transform = 'rotate(-45deg) translate(7px, -6px)';
        } else {
            spans[0].style.transform = 'none';
            spans[1].style.opacity = '1';
            spans[2].style.transform = 'none';
        }
    });

    // إغلاق قائمة الجوال عند النقر على رابط
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            if (navMenu.classList.contains('active')) {
                navToggle.classList.remove('active');
                navMenu.classList.remove('active');
                document.body.style.overflow = '';
                
                // إعادة تعيين تحويل الهامبرغر
                const spans = navToggle.querySelectorAll('span');
                spans[0].style.transform = 'none';
                spans[1].style.opacity = '1';
                spans[2].style.transform = 'none';
            }
        });
    });

    // تأثير التمرير على الهيدر
    window.addEventListener('scroll', function() {
        const scrolled = window.scrollY > 50;
        nav.classList.toggle('scrolled', scrolled);
        
        // تحديث رابط التنقل النشط بناءً على موضع التمرير
        updateActiveNavLink(sections, navLinks);
    });

    function updateActiveNavLink(sections, links) {
        let current = '';
        const scrollPos = window.scrollY + 100;

        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            const sectionId = section.getAttribute('id');

            if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                current = sectionId;
            }
        });

        links.forEach(link => {
            link.classList.remove('active');
            const section = link.getAttribute('data-section');
            if (section === current || (current === '' && section === 'hero')) {
                link.classList.add('active');
            }
        });
    }
}

// ===========================================
// مبدل السمة
// ===========================================

function initThemeSwitcher() {
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = themeToggle.querySelector('i');
    
    // الحصول على السمة المحفوظة أو استخدام الافتراضية
    const savedTheme = localStorage.getItem('aseel-theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);
    
    // تبديل السمة
    themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        // تحديث السمة
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('aseel-theme', newTheme);
        updateThemeIcon(newTheme);
        
        // إضافة حركة
        this.style.transform = 'rotate(180deg) scale(1.1)';
        setTimeout(() => {
            this.style.transform = 'rotate(0deg) scale(1)';
        }, 300);
    });
    
    function updateThemeIcon(theme) {
        if (theme === 'dark') {
            themeIcon.classList.remove('fa-sun');
            themeIcon.classList.add('fa-moon');
        } else {
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }
    }
}

// ===========================================
// مبدل اللغة
// ===========================================

function initLanguageSwitcher() {
    const langToggle = document.getElementById('languageToggle');
    const langText = langToggle.querySelector('.lang-text');
    
    // الحصول على اللغة المحفوظة أو استخدام الافتراضية
    const savedLang = localStorage.getItem('aseel-lang') || 'ar';
    setLanguage(savedLang);
    updateLangText(savedLang);
    
    // تبديل اللغة
    langToggle.addEventListener('click', function() {
        const currentLang = document.documentElement.getAttribute('lang') || 'ar';
        const newLang = currentLang === 'ar' ? 'en' : 'ar';
        
        this.style.transform = 'rotate(180deg) scale(1.1)';
        setTimeout(() => {
            setLanguage(newLang);
            updateLangText(newLang);
            localStorage.setItem('aseel-lang', newLang);
            this.style.transform = 'rotate(0deg) scale(1)';
        }, 300);
    });
    
    function setLanguage(lang) {
        document.documentElement.setAttribute('lang', lang);
        document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
        updateTexts(lang);
        updatePageTitle(lang);
        
        // إضافة انتقال للصفحة
        document.body.style.opacity = '0.8';
        setTimeout(() => {
            document.body.style.opacity = '1';
            document.body.style.transition = 'opacity 0.3s ease';
        }, 100);
    }
    
    function updateLangText(lang) {
        langText.textContent = translations[lang]['lang.ar'];
    }
    
    function updatePageTitle(lang) {
        document.title = translations[lang]['site.title'];
    }
}

function updateTexts(lang) {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
}

// ===========================================
// السنة الحالية
// ===========================================

function initCurrentYear() {
    const yearElement = document.getElementById('currentYear');
    if (yearElement) {
        yearElement.textContent = new Date().getFullYear();
    }
}

// ===========================================
// حركات التمرير
// ===========================================

function initScrollAnimations() {
    const animatedElements = document.querySelectorAll('.scroll-animate');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });
    
    animatedElements.forEach(element => {
        observer.observe(element);
    });
}

// ===========================================
// فلترة المشاريع
// ===========================================

function initProjectFilter() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const projectCards = document.querySelectorAll('.project-card');
    
    filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // إزالة النشط من جميع الأزرار
            filterBtns.forEach(b => b.classList.remove('active'));
            
            // إضافة النشط للزر المختار
            this.classList.add('active');
            
            // الحصول على قيمة الفلتر
            const filter = this.getAttribute('data-filter');
            
            // تصفية المشاريع
            projectCards.forEach(card => {
                if (filter === 'all' || card.getAttribute('data-category') === filter) {
                    card.style.display = 'block';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                } else {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 300);
                }
            });
        });
    });
}

// ===========================================
// نافذة المشروع
// ===========================================

function initProjectModal() {
    const modal = document.getElementById('projectModal');
    const modalClose = document.getElementById('modalClose');
    const viewProjectBtns = document.querySelectorAll('.view-project');
    
    // بيانات المشاريع
    const projects = {
        1: {
            category: 'هوية بصرية',
            title: 'علامة أزياء فاخرة',
            description: 'هوية بصرية كاملة لعلامة أزياء فاخرة تجمع بين التراث والحداثة. تضمن المشروع إنشاء نظام علامة تجارية شامل يعمل عبر نقاط التواصل الرقمية والمادية.',
            tags: ['تصميم الشعار', 'الهوية البصرية', 'المواد المطبوعة', 'دليل العلامة التجارية', 'نظام الألوان', 'الطباعة'],
            results: [
                'زيادة الوعي بالعلامة بنسبة 40%',
                'تحسين تجربة العملاء عبر جميع نقاط التواصل',
                'تعزيز الهوية البصرية بجاذبية حديثة'
            ]
        },
        2: {
            category: 'تصميم ويب',
            title: 'منصة فنية تفاعلية',
            description: 'واجهة مستخدم حديثة لمنصة فنية مع تجربة تصفح سلسة. يركز التصميم على التنقل سهل الاستخدام والعرض البصري الاستثنائي لمحبي الفن.',
            tags: ['تصميم واجهة المستخدم', 'عناصر تفاعلية', 'تصميم متجاوب', 'تجربة المستخدم', 'موبايل أولاً'],
            results: [
                'زيادة وقت التصفح بنسبة 60%',
                'تحسين معدلات التحويل بنسبة 35%',
                'تعزيز تجربة المستخدم بالتنقل البديهي'
            ]
        },
        3: {
            category: 'فن رقمي',
            title: 'سلسلة فن تجريدي',
            description: 'مجموعة من الأعمال الفنية الرقمية المستوحاة من الثقافة العربية المعاصرة. تحمل كل قطعة رسالة فنية فريدة تجمع بين التراث والحداثة.',
            tags: ['فن رقمي', 'رسم', 'فن تجريدي', 'الثقافة العربية', 'تصميم حديث'],
            results: [
                'معرض فني ناجح مع أكثر من 500 زائر',
                'بيع جميع الأعمال الفنية خلال الأسبوع الأول',
                'تغطية إعلامية واسعة في منشورات التصميم'
            ]
        }
    };
    
    // فتح النافذة عند النقر على المشروع
    viewProjectBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const projectId = this.getAttribute('data-project');
            openProjectModal(projectId);
        });
    });
    
    // إغلاق النافذة
    modalClose.addEventListener('click', closeModal);
    modal.querySelector('.modal-overlay').addEventListener('click', closeModal);
    
    // إغلاق بمفتاح Escape
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });
    
    function openProjectModal(projectId) {
        const project = projects[projectId];
        if (!project) return;
        
        // تحديث محتوى النافذة
        document.getElementById('modalCategory').textContent = project.category;
        document.getElementById('modalTitle').textContent = project.title;
        document.getElementById('modalDescription').textContent = project.description;
        
        // تحديث الوسوم
        const tagsContainer = document.getElementById('modalTags');
        tagsContainer.innerHTML = '';
        project.tags.forEach(tag => {
            const tagElement = document.createElement('span');
            tagElement.textContent = tag;
            tagsContainer.appendChild(tagElement);
        });
        
        // تحديث النتائج
        const resultsContainer = document.getElementById('modalResults');
        resultsContainer.innerHTML = '';
        project.results.forEach(result => {
            const li = document.createElement('li');
            li.textContent = result;
            resultsContainer.appendChild(li);
        });
        
        // تحديث الصورة بناءً على المشروع
        const modalImage = document.getElementById('modalImage');
        modalImage.style.background = getProjectGradient(projectId);
        
        // إظهار النافذة
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
        const modal = document.getElementById('projectModal');
        modal.classList.remove('active');
        document.body.style.overflow = '';
    }
    
    function getProjectGradient(id) {
        const gradients = [
            'linear-gradient(135deg, #FF6EC7, #FFB347)',
            'linear-gradient(135deg, #A0FFE6, #A7D8FF)',
            'linear-gradient(135deg, #B57FFF, #FF6EC7)'
        ];
        return gradients[id - 1] || gradients[0];
    }
}

// ===========================================
// نموذج الاتصال
// ===========================================

function initContactForm() {
    const contactForm = document.getElementById('contactForm');
    
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // الحصول على بيانات النموذج
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // عرض حالة التحميل
            const submitBtn = this.querySelector('.submit-btn');
            const originalText = submitBtn.querySelector('span').textContent;
            const originalIcon = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            submitBtn.disabled = true;
            
            // محاكاة استدعاء API
            setTimeout(() => {
                // عرض رسالة النجاح
                const currentLang = document.documentElement.getAttribute('lang') || 'ar';
                const successMsg = currentLang === 'ar' 
                    ? 'تم إرسال رسالتك بنجاح! سأتصل بك قريباً.' 
                    : 'Your message has been sent successfully! I will contact you soon.';
                showNotification(successMsg, 'success');
                
                // إعادة تعيين النموذج
                this.reset();
                
                // إعادة تعيين الزر
                submitBtn.innerHTML = originalIcon;
                submitBtn.querySelector('span').textContent = originalText;
                submitBtn.disabled = false;
                
                // إعادة تعيين تسميات النموذج
                resetFormLabels();
            }, 1500);
        });
    }
    
    // حركات إدخال النموذج
    const formGroups = document.querySelectorAll('.form-group');
    formGroups.forEach(group => {
        const input = group.querySelector('input, textarea, select');
        const label = group.querySelector('label');
        
        if (input && label) {
            // التهيئة بناءً على القيمة الحالية
            if (input.value) {
                label.style.top = '-1.5rem';
                label.style.fontSize = '0.85rem';
                label.style.color = 'var(--primary-color)';
                label.style.fontWeight = '700';
            }
            
            input.addEventListener('focus', function() {
                label.style.top = '-1.5rem';
                label.style.fontSize = '0.85rem';
                label.style.color = 'var(--primary-color)';
                label.style.fontWeight = '700';
            });
            
            input.addEventListener('blur', function() {
                if (!this.value) {
                    label.style.top = '1rem';
                    label.style.fontSize = '1rem';
                    label.style.color = 'var(--text-tertiary)';
                    label.style.fontWeight = '500';
                }
            });
            
            // التعامل مع تغيير الاختيار
            if (input.tagName === 'SELECT') {
                input.addEventListener('change', function() {
                    if (this.value) {
                        label.style.top = '-1.5rem';
                        label.style.fontSize = '0.85rem';
                        label.style.color = 'var(--primary-color)';
                        label.style.fontWeight = '700';
                    } else {
                        label.style.top = '1rem';
                        label.style.fontSize = '1rem';
                        label.style.color = 'var(--text-tertiary)';
                        label.style.fontWeight = '500';
                    }
                });
            }
        }
    });
    
    function resetFormLabels() {
        const labels = document.querySelectorAll('.form-group label');
        labels.forEach(label => {
            label.style.top = '1rem';
            label.style.fontSize = '1rem';
            label.style.color = 'var(--text-tertiary)';
            label.style.fontWeight = '500';
        });
    }
}

// ===========================================
// شريط تقدم التمرير
// ===========================================

function initScrollProgress() {
    // إنشاء شريط التقدم
    const progressBar = document.createElement('div');
    progressBar.className = 'scroll-progress';
    progressBar.style.cssText = `
        position: fixed;
        top: 0;
        right: 0;
        width: 0%;
        height: 3px;
        background: var(--gradient-1);
        z-index: 9998;
        transition: width 0.1s ease;
        pointer-events: none;
    `;
    document.body.appendChild(progressBar);
    
    // تحديث التقدم عند التمرير
    window.addEventListener('scroll', function() {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        progressBar.style.width = scrolled + '%';
    });
}

// ===========================================
// التمرير السلس
// ===========================================

function initSmoothScrolling() {
    // إضافة تمرير سلس للروابط
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            
            if (href === '#') return;
            
            e.preventDefault();
            const targetId = href.substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                const headerHeight = document.querySelector('.minimal-nav').offsetHeight;
                const targetPosition = targetElement.offsetTop - headerHeight - 20;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// ===========================================
// حركات الصفحة
// ===========================================

function initPageAnimations() {
    // إضافة حركة للعناصر عند التحميل
    const animatedElements = [
        '.hero-badge',
        '.hero-title .title-line',
        '.hero-description',
        '.hero-actions',
        '.stat-card',
        '.about-image',
        '.about-text',
        '.section-header',
        '.project-card',
        '.process-step',
        '.service-card',
        '.testimonial-bubble',
        '.big-cta',
        '.contact-item',
        '.social-link',
        '.form-group'
    ];
    
    animatedElements.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach((element, index) => {
            element.style.animationDelay = `${index * 0.1}s`;
            element.classList.add('scroll-animate');
        });
    });
    
    // تهيئة حركات التمرير
    initScrollAnimations();
}

// ===========================================
// جسيمات عائمة
// ===========================================

function initFloatingParticles() {
    if (!document.getElementById('floatingParticles')) {
        const particlesContainer = document.createElement('div');
        particlesContainer.id = 'floatingParticles';
        particlesContainer.className = 'floating-particles';
        
        // إنشاء الجسيمات
        const colors = ['var(--primary-color)', 'var(--secondary-color)', 'var(--accent-color)'];
        
        for (let i = 0; i < 15; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const size = Math.random() * 100 + 50;
            const color = colors[Math.floor(Math.random() * colors.length)];
            const left = Math.random() * 100;
            const top = Math.random() * 100;
            const duration = Math.random() * 10 + 20;
            const delay = Math.random() * 5;
            
            particle.style.cssText = `
                width: ${size}px;
                height: ${size}px;
                background: ${color};
                left: ${left}%;
                top: ${top}%;
                animation-delay: ${delay}s;
                animation-duration: ${duration}s;
                filter: blur(40px);
                opacity: 0.1;
            `;
            
            particlesContainer.appendChild(particle);
        }
        
        document.body.appendChild(particlesContainer);
    }
}

// ===========================================
// دالة تحميل السيرة الذاتية
// ===========================================

function downloadCV() {
    // إنشاء تحميل PDF محاكى
    const currentLang = document.documentElement.getAttribute('lang') || 'ar';
    const loadingMsg = currentLang === 'ar' 
        ? 'جاري تحميل السيرة الذاتية...' 
        : 'Downloading CV...';
    
    showNotification(loadingMsg, 'info');
    
    // محاكاة تأخير التحميل
    setTimeout(() => {
        // في السيناريو الحقيقي، هذا سيكون ملف PDF الفعلي الخاص بك
        const dummyPDF = `
        %PDF-1.4
        1 0 obj
        << /Type /Catalog /Pages 2 0 R >>
        endobj
        2 0 obj
        << /Type /Pages /Kids [3 0 R] /Count 1 >>
        endobj
        3 0 obj
        << /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Contents 4 0 R >>
        endobj
        4 0 obj
        << /Length 44 >>
        stream
        BT /F1 12 Tf 72 720 Td (Aseel - Creative Digital Designer) Tj ET
        endstream
        endobj
        xref
        0 5
        0000000000 65535 f 
        0000000010 00000 n 
        0000000053 00000 n 
        0000000101 00000 n 
        0000000176 00000 n 
        trailer
        << /Size 5 /Root 1 0 R >>
        startxref
        281
        %%EOF
        `;
        
        // إنشاء blob ورابط التحميل
        const blob = new Blob([dummyPDF], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        
        link.href = url;
        link.download = currentLang === 'ar' ? 'أسيل_السيرة_الذاتية.pdf' : 'Aseel_CV_Portfolio.pdf';
        link.style.display = 'none';
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        // عرض إشعار النجاح
        const successMsg = currentLang === 'ar' 
            ? 'تم تحميل السيرة الذاتية بنجاح!' 
            : 'CV downloaded successfully!';
        showNotification(successMsg, 'success');
    }, 1000);
}

// ===========================================
// نظام الإشعارات
// ===========================================

function showNotification(message, type = 'info') {
    // إزالة الإشعارات الموجودة
    const existingNotifications = document.querySelectorAll('.notification');
    existingNotifications.forEach(notification => notification.remove());
    
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    
    const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle';
    notification.innerHTML = `
        <i class="fas fa-${icon}"></i>
        <span>${message}</span>
    `;
    
    // إضافة الأنماط
    Object.assign(notification.style, {
        position: 'fixed',
        top: '100px',
        right: '20px',
        background: 'var(--bg-card)',
        border: '2px solid var(--border-color)',
        borderRadius: 'var(--element-radius)',
        padding: '1.25rem 1.5rem',
        display: 'flex',
        alignItems: 'center',
        gap: '1rem',
        zIndex: '9999',
        animation: 'slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
        boxShadow: 'var(--shadow-lg)',
        maxWidth: '350px',
        fontWeight: '600'
    });
    
    if (type === 'success') {
        notification.style.borderLeft = '4px solid var(--primary-color)';
        notification.querySelector('i').style.color = 'var(--primary-color)';
    } else if (type === 'error') {
        notification.style.borderLeft = '4px solid #ff4d4d';
        notification.querySelector('i').style.color = '#ff4d4d';
    } else {
        notification.style.borderLeft = '4px solid var(--accent-color)';
        notification.querySelector('i').style.color = 'var(--accent-color)';
    }
    
    document.body.appendChild(notification);
    
    // الإزالة التلقائية بعد 3 ثوانٍ
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
    
    // إضافة أنماط الحركات إذا لم تكن مضافة بالفعل
    addNotificationAnimations();
    
    // الإغلاق عند النقر
    notification.addEventListener('click', () => {
        notification.style.animation = 'slideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards';
        setTimeout(() => notification.remove(), 300);
    });
}

function addNotificationAnimations() {
    if (!document.getElementById('notification-styles')) {
        const style = document.createElement('style');
        style.id = 'notification-styles';
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%) translateY(-20px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0) translateY(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0) translateY(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%) translateY(-20px);
                    opacity: 0;
                }
            }
            
            .notification {
                cursor: pointer;
                transition: transform 0.2s ease;
            }
            
            .notification:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-xl);
            }
            
            @media (max-width: 768px) {
                .notification {
                    right: 10px;
                    left: 10px;
                    top: 80px;
                    max-width: calc(100% - 20px);
                }
            }
        `;
        document.head.appendChild(style);
    }
}

// ===========================================
// تأثيرات إضافية
// ===========================================

// إضافة تأثير اهتزاز خفيف للأزرار
document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll('.btn-primary, .btn-secondary, .btn-tertiary, .cta-button');
    
    buttons.forEach(button => {
        button.addEventListener('mouseenter', function() {
            this.style.transform = this.style.transform + ' scale(1.02)';
        });
        
        button.addEventListener('mouseleave', function() {
            this.style.transform = this.style.transform.replace(' scale(1.02)', '');
        });
    });
});

// تأثير تحميل الصفحة
window.addEventListener('load', function() {
    document.body.style.animation = 'fadeIn 1s ease-out';
});

// تحديث ديناميكي للترجمات عند تغيير اللغة
window.addEventListener('languageChange', function() {
    const lang = document.documentElement.getAttribute('lang') || 'ar';
    updateTexts(lang);
});